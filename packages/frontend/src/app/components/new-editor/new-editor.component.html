<mat-card class="p-3 m-2 mb-6 lg:mx-4 scalein wafrn-container" >
    <button mat-mini-fab class="delete-btn" (mousedown)="closeEditor()">
          <fa-icon size="lg" [icon]="closeIcon"></fa-icon>
        </button>
        <h3 *ngIf="data?.post && !editing">In reply to:</h3>
        <div class="in-reply-to-preview quoted-post" *ngIf="data && data.post && !editing">
          <div class="flex">
            <app-post-header [fragment]="data.post" [disableLink]="true"></app-post-header>
          </div>
          <app-post-fragment [fragment]="data.post"></app-post-fragment>
        </div>
        <h2 *ngIf="editing">
          You are editing your woot. Sorry you need to write all of it again.
        </h2>
        <ng-container *ngIf="data && data.ask">
          <h2>Replying ask</h2>
          <app-single-ask [ask]="data.ask"></app-single-ask>
        </ng-container>
        <div class="below-editor-toolbar">
          <div class="flex justify-content-end my-2">
            <button mat-button [matMenuTriggerFor]="menu" aria-label="Edit privacy of post" class="input-height-btn">
              <fa-icon size="lg" [icon]="getPrivacyIcon()"></fa-icon>
            </button>
          </div>
          <div class="flex justify-content-end my-2">
            <button aria-label="Enable the quote setter" mat-button (mousedown)="quoteOpen = !quoteOpen"
              class="input-height-btn">
              <fa-icon size="lg" [icon]="quoteIcon"></fa-icon>
            </button>
          </div>
          <div class="flex justify-content-end my-2" *ngIf="uploadedMedias.length < 4 && pollQuestions.length === 0">
            <app-file-upload (fileUpload)="uploadImage($event)"></app-file-upload>
          </div>
          <div class="flex justify-content-end my-2">
            <button class="input-height-btn" mat-button (mousedown)="showContentWarning = !showContentWarning">
              CW
            </button>
          </div>
          <div class="flex justify-content-end my-2 flex-grow-1 w-full-mobile">
            @if (showContentWarning || contentWarning) {
            <mat-form-field class="w-full" appearance="outline" subscriptSizing="dynamic">
              <mat-label>Content warning</mat-label>
              <input [(ngModel)]="contentWarning" matNativeControl />
            </mat-form-field>
            }
          </div>
        </div>
        @if (quoteOpen && !data?.quote) {
          <mat-card class="p-2 my-4" *ngIf="!quoteLoading">
            <mat-form-field class="w-full">
              <mat-label>
                Paste the URL of a post to quote it. Can be the external url or the
                wafrn url
              </mat-label>
              <input [(ngModel)]="urlPostToQuote" placeholder="Just paste the post url" matNativeControl />
            </mat-form-field>
            <button (mousedown)="loadQuote()" mat-stroked-button color="primary" class="w-full"
              [disabled]="urlPostToQuote === ''">
              Add post as quote
            </button>
          </mat-card>
          }

          <mat-menu #menu="matMenu">
            @for (option of privacyOptions; track $index) {
            <button (mousedown)="this.privacy = option.level" mat-menu-item>
              <fa-icon [icon]="option.icon"></fa-icon>
              {{ option.name }}
            </button>
            }
          </mat-menu>
        </mat-card>